(function(i){var l=i.Axis,D=i.Chart,n=i.Color,E=i.Legend,x=i.LegendSymbolMixin,y=i.Series,z=i.SVGRenderer,A=i.getOptions(),j=i.each,u=i.extend,F=i.extendClass,o=i.merge,p=i.pick,B=i.numberFormat,q=i.seriesTypes,v=i.wrap,m=function(){},r=i.ColorAxis=function(){this.isColorAxis=true;this.init.apply(this,arguments)};u(r.prototype,l.prototype);u(r.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:true,endOnTick:true,offset:0,marker:{animation:{duration:50},
color:"gray",width:0.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(b,a){var d=b.options.legend.layout!=="vertical",c;c=o(this.defaultColorAxisOptions,{side:d?2:1,reversed:!d},a,{isX:d,opposite:!d,showEmpty:false,title:null,isColor:true});l.prototype.init.call(this,b,c);a.dataClasses&&this.initDataClasses(a);this.initStops(a);this.isXAxis=true;this.horiz=d;this.zoomEnabled=false},tweenColors:function(b,a,d){var c=a.rgba[3]!==1||b.rgba[3]!==1;return(c?
"rgba(":"rgb(")+Math.round(a.rgba[0]+(b.rgba[0]-a.rgba[0])*(1-d))+","+Math.round(a.rgba[1]+(b.rgba[1]-a.rgba[1])*(1-d))+","+Math.round(a.rgba[2]+(b.rgba[2]-a.rgba[2])*(1-d))+(c?","+(a.rgba[3]+(b.rgba[3]-a.rgba[3])*(1-d)):"")+")"},initDataClasses:function(b){var a=this,d=this.chart,c,e=0,f=this.options,g=b.dataClasses.length;this.dataClasses=c=[];this.legendItems=[];j(b.dataClasses,function(h,w){var k;h=o(h);c.push(h);if(!h.color)f.dataClassColor==="category"?(k=d.options.colors,h.color=k[e++],e===
k.length&&(e=0)):h.color=a.tweenColors(n(f.minColor),n(f.maxColor),g<2?0.5:w/(g-1))})},initStops:function(b){this.stops=b.stops||[[0,this.options.minColor],[1,this.options.maxColor]];j(this.stops,function(a){a.color=n(a[1])})},setOptions:function(b){l.prototype.setOptions.call(this,b);this.options.crosshair=this.options.marker;this.coll="colorAxis"},setAxisSize:function(){var b=this.legendSymbol,a=this.chart,d,c,e;if(b){this.left=d=b.attr("x");this.top=c=b.attr("y");this.width=e=b.attr("width");this.height=
b=b.attr("height");this.right=a.chartWidth-d-e;this.bottom=a.chartHeight-c-b;this.len=this.horiz?e:b;this.pos=this.horiz?d:c}},toColor:function(b,a){var d,c=this.stops,e,f=this.dataClasses,g,h;if(f)for(h=f.length;h--;){if(g=f[h],e=g.from,c=g.to,(e===void 0||b>=e)&&(c===void 0||b<=c)){d=g.color;if(a)a.dataClass=h;break}}else{this.isLog&&(b=this.val2lin(b));d=1-(this.max-b)/(this.max-this.min||1);for(h=c.length;h--;)if(d>c[h][0])break;e=c[h]||c[h+1];c=c[h+1]||e;d=1-(c[0]-d)/(c[0]-e[0]||1);d=this.tweenColors(e.color,
c.color,d)}return d},getOffset:function(){var b=this.legendGroup,a=this.chart.axisOffset[this.side];if(b){l.prototype.getOffset.call(this);if(!this.axisGroup.parentGroup){this.axisGroup.add(b);this.gridGroup.add(b);this.labelGroup.add(b);this.added=true}this.chart.axisOffset[this.side]=a}},setLegendColor:function(){var b,a=this.options;b=this.horiz?[0,0,1,0]:[0,0,0,1];this.legendColor={linearGradient:{x1:b[0],y1:b[1],x2:b[2],y2:b[3]},stops:a.stops||[[0,a.minColor],[1,a.maxColor]]}},drawLegendSymbol:function(b,
a){var d=b.padding,c=b.options,e=this.horiz,f=p(c.symbolWidth,e?200:12),g=p(c.symbolHeight,e?12:200),h=p(c.labelPadding,e?16:30);c=p(c.itemDistance,10);this.setLegendColor();a.legendSymbol=this.chart.renderer.rect(0,b.baseline-11,f,g).attr({zIndex:1}).add(a.legendGroup);a.legendSymbol.getBBox();this.legendItemWidth=f+d+(e?c:h);this.legendItemHeight=g+d+(e?h:0)},setState:m,visible:true,setVisible:m,getSeriesExtremes:function(){var b;if(this.series.length){b=this.series[0];this.dataMin=b.valueMin;this.dataMax=
b.valueMax}},drawCrosshair:function(b,a){var d=!this.cross,c=a&&a.plotX,e=a&&a.plotY,f,g=this.pos,h=this.len;if(a){f=this.toPixels(a.value);f<g?f=g-2:f>g+h&&(f=g+h+2);a.plotX=f;a.plotY=this.len-f;l.prototype.drawCrosshair.call(this,b,a);a.plotX=c;a.plotY=e;!d&&this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.labelGroup)}},getPlotLinePath:function(b,a,d,c,e){return e?this.horiz?["M",e-4,this.top-6,"L",e+4,this.top-6,e,this.top,"Z"]:["M",this.left,e,"L",this.left-6,e+6,this.left-6,
e-6,"Z"]:l.prototype.getPlotLinePath.call(this,b,a,d,c)},update:function(b,a){j(this.series,function(d){d.isDirtyData=true});l.prototype.update.call(this,b,a);this.legendItem&&(this.setLegendColor(),this.chart.legend.colorizeItem(this,true))},getDataClassLegendSymbols:function(){var b=this,a=this.chart,d=this.legendItems,c=a.options.legend,e=c.valueDecimals,f=c.valueSuffix||"",g;d.length||j(this.dataClasses,function(h,w){var k=true,s=h.from,t=h.to;g="";s===void 0?g="< ":t===void 0&&(g="> ");s!==void 0&&
(g+=B(s,e)+f);s!==void 0&&t!==void 0&&(g+=" - ");t!==void 0&&(g+=B(t,e)+f);d.push(u({chart:a,name:g,options:{},drawLegendSymbol:x.drawRectangle,visible:true,setState:m,setVisible:function(){k=this.visible=!k;j(b.series,function(G){j(G.points,function(C){C.dataClass===w&&C.setVisible(k)})});a.legend.colorizeItem(this,k)}},h))});return d},name:""});j(["fill","stroke"],function(b){HighchartsAdapter.addAnimSetter(b,function(a){a.elem.attr(b,r.prototype.tweenColors(n(a.start),n(a.end),a.pos))})});v(D.prototype,
"getAxes",function(b){var a=this.options.colorAxis;b.call(this);this.colorAxis=[];a&&new r(this,a)});v(E.prototype,"getAllItems",function(b){var a=[],d=this.chart.colorAxis[0];d&&(d.options.dataClasses?a=a.concat(d.getDataClassLegendSymbols()):a.push(d),j(d.series,function(c){c.options.showInLegend=false}));return a.concat(b.call(this))});i={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis",
"colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:m,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var b=this,a=this.options.nullColor,d=this.colorAxis,c=this.colorKey;j(this.data,function(e){var f=e[c];if(f=f===null?a:d&&f!==void 0?d.toColor(f,e):e.color||b.color)e.color=f})}};v(z.prototype,"buildText",function(b,a){var d=a.styles&&a.styles.HcTextStroke;b.call(this,a);d&&a.applyTextStroke&&a.applyTextStroke(d)});
z.prototype.Element.prototype.applyTextStroke=function(b){var a=this.element,d,c;b=b.split(" ");d=a.getElementsByTagName("tspan");c=a.firstChild;this.ySetter=this.xSetter;j([].slice.call(d),function(e,f){var g;f===0&&(e.setAttribute("x",a.getAttribute("x")),(f=a.getAttribute("y"))!==null&&e.setAttribute("y",f));g=e.cloneNode(1);g.setAttribute("stroke",b[1]);g.setAttribute("stroke-width",b[0]);g.setAttribute("stroke-linejoin","round");a.insertBefore(g,c)})};A.plotOptions.heatmap=o(A.plotOptions.scatter,
{animation:false,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},verticalAlign:"middle",crop:false,overflow:false,style:{color:"white",fontWeight:"bold",HcTextStroke:"1px rgba(0,0,0,0.5)"}},marker:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:true},hover:{brightness:0.2}}});q.heatmap=F(q.scatter,o(i,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:true,supportsDrilldown:true,getExtremesFromAll:true,
init:function(){q.scatter.prototype.init.apply(this,arguments);this.pointRange=this.options.colsize||1;this.yAxis.axisPointRange=this.options.rowsize||1},translate:function(){var b=this.options,a=this.xAxis,d=this.yAxis;this.generatePoints();j(this.points,function(c){var e=(b.colsize||1)/2,f=(b.rowsize||1)/2,g=Math.round(a.len-a.translate(c.x-e,0,1,0,1));e=Math.round(a.len-a.translate(c.x+e,0,1,0,1));var h=Math.round(d.translate(c.y-f,0,1,0,1));f=Math.round(d.translate(c.y+f,0,1,0,1));c.plotX=(g+
e)/2;c.plotY=(h+f)/2;c.shapeType="rect";c.shapeArgs={x:Math.min(g,e),y:Math.min(h,f),width:Math.abs(e-g),height:Math.abs(f-h)}});this.translateColors();this.chart.hasRendered&&j(this.points,function(c){c.shapeArgs.fill=c.options.color||c.color})},drawPoints:q.column.prototype.drawPoints,animate:m,getBox:m,drawLegendSymbol:x.drawRectangle,getExtremes:function(){y.prototype.getExtremes.call(this,this.valueData);this.valueMin=this.dataMin;this.valueMax=this.dataMax;y.prototype.getExtremes.call(this)}}))})(Highcharts);
